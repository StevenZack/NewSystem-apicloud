<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"
    />
    <meta name="format-detection" content="telephone=no,email=no,date=no,aItemress=no">
    <title>AUI快速完成布局</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
</head>

<body id='body'>
    <div id="content">
        <section class="aui-content" v-for='(v,cindex) in videos'>
            <div class="aui-card-list aui-border-t aui-border-b" tapmode v-on:click='fnPlayVideo(cindex)'>
                <div class="aui-card-list-content">
                    <img :src='v.image'>
                </div>
                <div class="aui-card-list-header aui-padded-t-5 aui-padded-b-5">
                    {{v.title}}
                </div>
            </div>
        </section>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/vue.min.js"></script>
<script type="text/javascript">
    function initData() {
        window.host = 'http://101.200.54.63:8080'
        window.openId = $api.getStorage('user').openId
        window.head = $api.getStorage('user').head
        window.nickname = $api.getStorage('user').nickname
    }
    apiready = function () {
        window.videoPlayer = api.require('videoPlayer');
        window.app=new Vue({
            el:'#content',
            data:{
                videos:[
                    {
                        title:'黄河与长城的第一次握手，就在山西这个消逝的村落！',
                        image:'https://wx4.sinaimg.cn/crop.0.121.2000.1125.360/006RmV8Gly1fnir3q6ytfj31jk0zju0x.jpg',
                        videolink:'https://fus.cdn.krcom.cn/003E81EDlx07jo3MOBSo0104020878r50k060.mp4?label=mp4_1080p&template=1920x1080.27&Expires=1526824210&ssig=m6kzEPc%2F03&KID=unistore,video'
                    },
                    {
                        title:'饭局第一法则',
                        image:'https://wx4.sinaimg.cn/crop.0.63.1200.675.360/0070DtfPly1fr747pkhqjj30xc0m8ka1.jpg',
                        videolink:'https://fus.cdn.krcom.cn/0001alZ7lx07knbDVIkg01040202USVg0k030.mp4?label=mp4_1080p&template=1920x1080.27&Expires=1526824411&ssig=lPisZxT7Kj&KID=unistore,video'
                    }
                ],
                fnPlayVideo:function(index) {
                    window.videoPlayer.play({
                        texts: {
                            head: {
                                title: window.app.videos[index].title
                            }
                        },
                        path: window.app.videos[index].videolink, 
                        autoPlay: true 
                    }, function (ret, err) {
                        if (ret) {
                        } else {
                            alert(JSON.stringify(err));
                        }
                    });
                }
            }
        })
    }
</script>

</html>